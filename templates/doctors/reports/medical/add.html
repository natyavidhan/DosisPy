{% extends 'base.html' %}
{% block title %}
    Add New Report
{% endblock title %}
{% block content %}
<link rel="stylesheet" href="/static/css/settings.css">
<style>
    
.container{
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
}
</style>
    <div class="container mt-5 mb-5">
            <form method="post">
                <h1>Add New Report</h1>
                <div class="mt-3">
                    <label for="patient">Patient</label>
                    <select name="for" id="patient">
                        {% for patient in user['patients'] %}
                            <option value="{{patient['_id']}}">
                                {{patient.name}}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mt-3">
                    <label for="heading">Heading</label>
                    <input type="text" name="heading" id="heading">
                </div>
                <div class="mt-3">
                    <label for="description">Description</label>
                    <br>
                    <textarea name="description" id="description"></textarea>
                </div>
                <div class="mt-3">
                    <label for="comments">Comments</label>
                    <br>
                    <textarea name="comments" id="comments"></textarea>
                </div>
                <div class="mt-3">
                    <h4>Medicines</h4>
                    <div class="meds">
                        <div class="input-group mb-3">
                            <span class="input-group-text">Name</span>
                            <input type="text" class="form-control" name="medicineName1">
                            <span class="input-group-text">Reason</span>
                            <input type="text" class="form-control" name="medicineReason1">
                            <span class="input-group-text">Start</span>
                            <input type="date" class="form-control" name="medicineStart1">
                            <span class="input-group-text">End</span>
                            <input type="date" class="form-control" name="medicineEnd1">
                            <span class="input-group-text">Time</span>
                            <input type="time" class="form-control" name="medicineTime1">
                          </div>
                        <button class="btn btn-success med-add" onclick="addMedicine()" type="button">+</button>
                    </div>
                </div>
                <button type="submit" class="btn btn-success">Add Report</button>
            </form>
    </div>
    <script>
        function addMedicine(){
            const allMeds = $('.meds').length+1;
            const medDiv = `
        <div class="input-group mb-3">
            <span class="input-group-text">Name</span>
            <input type="text" class="form-control" name="medicineName`+allMeds+`">
            <span class="input-group-text">Reason</span>
            <input type="text" class="form-control" name="medicineReason`+allMeds+`">
            <span class="input-group-text">Start</span>
            <input type="date" class="form-control" name="medicineStart`+allMeds+`">
            <span class="input-group-text">End</span>
            <input type="date" class="form-control" name="medicineEnd`+allMeds+`">
            <span class="input-group-text">Time</span>
            <input type="time" class="form-control" name="medicineTime`+allMeds+`">
        </div>`
            $('.med-add').before(medDiv);
        }
    </script>
{% endblock content %}